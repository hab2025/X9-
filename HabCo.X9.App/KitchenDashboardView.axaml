<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:core="using:HabCo.X9.Core"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="HabCo.X9.App.KitchenDashboardView">
    <DockPanel Margin="10">
        <TextBlock DockPanel.Dock="Top" Text="Kitchen Dashboard" FontSize="20" FontWeight="Bold" Margin="0,0,0,10"/>

        <Grid ColumnDefinitions="*,2*">
            <!-- Orders List -->
            <ListBox Grid.Column="0" ItemsSource="{Binding Orders}" SelectedItem="{Binding SelectedOrder}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="5" Margin="2">
                            <StackPanel>
                                <TextBlock Text="{Binding Booking.ClientName}" FontWeight="Bold"/>
                                <TextBlock Text="{Binding Booking.EventDay, StringFormat='{}{0:D}'}"/>
                                <TextBlock Text="{Binding Status, StringFormat='Status: {0}'}"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <!-- Selected Order Details -->
            <Border Grid.Column="1" Margin="10,0,0,0" BorderBrush="LightGray" BorderThickness="1" CornerRadius="4" IsVisible="{Binding SelectedOrder, Converter={x:Static ObjectConverters.IsNotNull}}">
                <StackPanel Margin="10" Spacing="5">
                    <TextBlock Text="Order Details" FontSize="16" FontWeight="Bold"/>
                    <Separator/>
                    <TextBlock>
                        <Run Text="Client:"/>
                        <Run Text="{Binding SelectedOrder.Booking.ClientName}" FontWeight="Bold"/>
                    </TextBlock>
                    <TextBlock>
                        <Run Text="Event Date:"/>
                        <Run Text="{Binding SelectedOrder.Booking.EventDay, StringFormat='{}{0:D}'}" FontWeight="Bold"/>
                    </TextBlock>
                    <TextBlock>
                        <Run Text="Status:"/>
                        <Run Text="{Binding SelectedOrder.Status}" FontWeight="Bold"/>
                    </TextBlock>

                    <TextBlock Text="Required Items:" Margin="0,15,0,5" FontWeight="Bold"/>
                    <DataGrid ItemsSource="{Binding SelectedOrder.OrderItems}"
                              IsReadOnly="True"
                              AutoGenerateColumns="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Item" Binding="{Binding InventoryItem.Name}" Width="*"/>
                            <DataGridTextColumn Header="Quantity" Binding="{Binding Quantity}"/>
                            <DataGridTextColumn Header="Unit" Binding="{Binding InventoryItem.Unit}"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Right" Margin="0,15,0,0">
                        <Button Content="Set In Progress" Command="{Binding SetStatusCommand}" CommandParameter="{x:Static core:KitchenOrderStatus.InProgress}"/>
                        <Button Content="Set Completed" Command="{Binding SetStatusCommand}" CommandParameter="{x:Static core:KitchenOrderStatus.Completed}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</UserControl>